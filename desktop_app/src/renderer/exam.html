<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>გამოცდა</title>
    <link rel="stylesheet" href="styles/exam.css">
</head>
<body>
    <div class="left-section">
        <div class="logo-area">
            <img src="../../assets/graphics/logo3.svg" alt="Logo" class="left-logo">
        </div>
        <div class="camera-area">
            <video id="camera-video" autoplay playsinline></video>
            <!-- Recording Indicator -->
            <div id="recording-indicator" class="recording-indicator" style="display: none;"></div>
            <!-- Recording Error Message -->
            <div id="recording-error-message" class="recording-error" style="display: none;">
                <span class="error-icon">⚠</span>
                <span class="error-text">ჩაწერა არ მიმდინარეობს</span>
            </div>
        </div>
        <div class="warning-text">
            <p>• მიმდინარეობს აუდიო/ვიდეო ჩაწერა, დარჩით ვიდეოთვალის ხედვის არეში.</p>
            <p>• პასუხები გადაამოწმეთ მხოლოდ "საგამოცდო დოკუმენტაცია"-ის გვერდზე, სხვა საშუალებების გამოყენება იკრძალება.</p>
        </div>
        <div class="bottom-area">
            <table class="info-table">
                <tr><td>თეორიული გამოცდა</td></tr>
                <tr><td>ხანგრძლივობა <span id="exam-duration">00:45</span></td></tr>
                <tr><td id="candidate-name">---</td></tr>
                <tr><td>უნ/კოდი <span id="candidate-code">---</span></td></tr>
                <tr><td>თარიღი <span id="exam-date">--.--.----</span></td></tr>
                <tr><td>დრო. <span id="exam-time">--:--</span></td></tr>
            </table>
        </div>
    </div>
    <div class="right-section">
        <div class="exam-screen">
            <div class="navigation-buttons">
                <button class="nav-button active" data-tab="exam">გამოცდა</button>
                <button class="nav-button" data-tab="documentation">საგამოცდო დოკუმენტაცია</button>
            </div>
            <div class="exam-content">
                <div class="question-container">
                    <div class="question-element">
                        <div class="question-text-wrapper">
                            <!-- აქ განთავსდება კითხვის ტექსტი -->
                            <p>აქედან რომელი არის სწორი პასუხი?</p>
                        </div>
                    </div>
                    
                    <div class="answer-element">
                        <div class="answer-left">
                            <span class="answer-letter">A</span>
                            <input type="checkbox" name="answer" value="A" class="answer-checkbox">
                        </div>
                        <div class="answer-right">
                            <div class="answer-text-wrapper">
                                <!-- აქ განთავსდება პასუხის ტექსტი -->
                                <p>პირველი სავარაუდო პასუხი</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="answer-element">
                        <div class="answer-left">
                            <span class="answer-letter">B</span>
                            <input type="checkbox" name="answer" value="B" class="answer-checkbox">
                        </div>
                        <div class="answer-right">
                            <div class="answer-text-wrapper">
                                <!-- აქ განთავსდება პასუხის ტექსტი -->
                                <p>მეორე სავარაუდო პასუხი</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="answer-element">
                        <div class="answer-left">
                            <span class="answer-letter">C</span>
                            <input type="checkbox" name="answer" value="C" class="answer-checkbox">
                        </div>
                        <div class="answer-right">
                            <div class="answer-text-wrapper">
                                <!-- აქ განთავსდება პასუხის ტექსტი -->
                                <p>მესამე სავარაუდო პასუხი</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="answer-element">
                        <div class="answer-left">
                            <span class="answer-letter">D</span>
                            <input type="checkbox" name="answer" value="D" class="answer-checkbox">
                        </div>
                        <div class="answer-right">
                            <div class="answer-text-wrapper">
                                <!-- აქ განთავსდება პასუხის ტექსტი -->
                                <p>მეოთხე სავარაუდო პასუხი</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="exam-control-panel">
                <div class="block-number-field">
                    <span class="field-label">ბლოკი:</span>
                    <span class="field-value">3</span>
                </div>
                <div class="block-count-field">
                    <span class="count-value">42/23</span>
                </div>
                <div class="control-buttons">
                    <button class="nav-arrow prev-question">❮</button>
                    <div class="question-dots">
                        <span class="dot correct"></span>
                        <span class="dot incorrect"></span>
                        <span class="dot unanswered"></span>
                        <span class="dot unanswered"></span>
                        <span class="dot correct"></span>
                    </div>
                    <button class="nav-arrow next-question">❯</button>
                </div>
                <div class="question-count-field">
                    <span class="count-value">100/37</span>
                </div>
                <div class="question-code-field">
                    <span class="field-label">კითხვა:</span>
                    <span class="field-value">Q-0042</span>
                </div>
            </div>
            <div class="documentation-viewer">
                <div class="pdf-viewer"></div>
                <div class="doc-list"></div>
            </div>
            
            <!-- Gate Password Overlay -->
            <div class="exam-gate-overlay" id="exam-gate-overlay">
                <div class="gate-form">
                    <div class="gate-logo">
                        <img src="../../assets/graphics/logo3.svg" alt="Logo">
                    </div>
                    <h2 class="gate-title">ადმინისტრატორის ვერიფიკაცია</h2>
                    <div class="gate-input-group">
                        <label for="gate-password">პაროლი:</label>
                        <input type="password" id="gate-password" placeholder="შეიყვანეთ პაროლი" autocomplete="off" autofocus>
                        <button id="gate-verify-btn" class="gate-btn">შემოწმება</button>
                    </div>
                    <div id="gate-error" class="gate-error" style="display: none;"></div>
                </div>
            </div>

            <!-- Success Message Overlay -->
            <div class="success-overlay" id="success-overlay" style="display: none;">
                <div class="success-message">
                    <h2 class="success-title">✓</h2>
                    <p class="success-text">გამოცდის დასაწყებად დაკლიკეთ ღილაკს "დაწყება" და თქვენ ჩაერთვებით საგამოცდო პროცესში. გისურვებთ წარმატებებს</p>
                </div>
            </div>

            <!-- Results Overlay -->
            <div class="results-overlay" id="results-overlay" style="display: none;">
                <div class="results-container">
                    <h1 class="results-title">გამოცდა დასრულებულია!</h1>
                    
                    <div class="results-summary">
                        <div class="result-item result-main">
                            <span class="result-label">საერთო შედეგი:</span>
                            <span class="result-value" id="total-score">0%</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">სწორი პასუხები:</span>
                            <span class="result-value" id="correct-answers">0/0</span>
                        </div>
                    </div>

                    <div class="results-divider"></div>

                    <div class="block-results" id="block-results">
                        <!-- ბლოკების შედეგები დაემატება JavaScript-ით -->
                    </div>

                    <div class="results-divider"></div>

                    <button class="results-button" id="return-home-btn">მთავარ გვერდზე დაბრუნება</button>
                </div>
            </div>

            <!-- Confirmation Modal -->
            <div class="confirm-overlay" id="confirm-overlay" style="display: none;">
                <div class="confirm-modal">
                    <div class="confirm-icon">⚠️</div>
                    <h3 class="confirm-title">გაფრთხილება</h3>
                    <p class="confirm-message" id="confirm-message">თქვენ დაგრჩათ პასუხგაუცემელი კითხვები. გამოცდის დასრულება გულისხმობს შეუქცევად პროცესს და კითხვებს ვეღარ დაუბრუნდებით. დარწმუნებული ხართ რომ გსურთ გამოცდის დასრულება?</p>
                    <div class="confirm-buttons">
                        <button class="confirm-btn confirm-cancel" id="confirm-cancel">გაუქმება</button>
                        <button class="confirm-btn confirm-ok" id="confirm-ok">დასრულება</button>
                    </div>
                </div>
            </div>

            <!-- Focus Loss Warning -->
            <div class="warning-overlay" id="warning-overlay" style="display: none;">
                <div class="warning-modal">
                    <div class="warning-icon">🚨</div>
                    <h2 class="warning-title">გაფრთხილება!</h2>
                    <p class="warning-text">თქვენ არღვევთ გამოცდის წესებს</p>
                    <div class="countdown-display">
                        <p class="countdown-text">გამოცდაზე დაბრუნება:</p>
                        <div class="countdown-number" id="countdown-number">10</div>
                        <p class="countdown-subtext">წამში დაბრუნდით გამოცდაზე, თორემ გამოცდა დასრულდება</p>
                    </div>
                    <button class="warning-btn" id="return-to-exam-btn">გამოცდაზე დაბრუნება</button>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="logo-container">
            </div>
            <div class="buttons-container">
                <button class="exam-button" id="start-button">დაწყება</button>
                <button class="exam-button" id="finish-button">დასრულება</button>
            </div>
            <div class="timer-container">
                <span class="timer-text">00:00:00</span>
            </div>
        </div>
    </div>
    
    <script src="../config/api.js"></script>
    <script src="exam.js"></script>
</body>
</html>

